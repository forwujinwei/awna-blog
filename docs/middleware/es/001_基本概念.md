# 基本概念

## 索引(index)

相当于关系性数据库的库

## 类型(type)

相当于关系型数据库的表，在7.8版本之前可以指定，7.8版本固定为_doc，到8.x版本将完全取代，新手要注意这一点，网上找的很多资料都是6.x版本的，在7.x上很多api运行不通

## 文档(document)

相当于关系数据库一行数据

## 映射(mapping)

mapping 是用来定义文档及其字段的存储方式、索引方式的手段，例如利用mapping 来定义以下内容：

- 哪些字段需要被定义为全文检索类型
- 哪些字段包含number、date类型等
- 格式化时间格式
- 自定义规则，用于控制动态添加字段的映射

## Mapping Type

每个索引都拥有唯一的 mapping type，用来决定文档将如何被索引。mapping type由下面两部分组成

- Meta-fields

元字段用于自定义如何处理文档的相关元数据。 元字段的示例包括文档的_index，_type，_id和_source字段。

- Fields or properties

映射类型包含与文档相关的字段或属性的列表

## 主分片（primary shard）

⼀个索引可以存储超出单个结点硬件限制的⼤量数据。⽐如，⼀个具有10亿⽂档的索引占据1TB的磁盘 空间，⽽任⼀节点都没有这样⼤的磁盘空间；或者单个节点处理搜索请求，响应太慢。为了解决这个问 题，Elasticsearch提供了将索引划分成多份的能⼒，这些份就叫做分⽚。当你创建⼀个索引的时候，你 可以指定你想要的分⽚的数量。每个分⽚本身也是⼀个功能完善并且独⽴的“索引”，这个“索引”可以被 放置到集群中的任何节点上。

分片很重要，主要有两⽅⾯的原因：

1）允许你⽔平分割/扩展你的内容容 量。

2）允许你在分⽚（潜在地，位于多个节点上）之上进行分布式的、并行的操作，进而提⾼性能/吞吐量。

## ES与mysql的对比

| Relational DB      | Elasticsearch          |
| ------------------ | ---------------------- |
| 数据库（database） | 索引（indices）        |
| 表（tables）       | types（es8以后将弃用） |
| 行（rows）         | documents              |
| 字段（columns）    | fields                 |

## Rest风格说明

| method | url地址                                         | 描述                       |
| ------ | ----------------------------------------------- | -------------------------- |
| PUT    | localhost:9200/索引名称/类型名称/文档Id         | 创建文档(指定文档ID)       |
| POST   | localhost:9200/索引名称/类型名称                | 创建文档(随机文档)         |
| POST   | localhost:9200/索引名称/类型名称/文档Id/_update | 修改文档                   |
| DELETE | localhost:9200/索引名称/类型名称/文档Id         | 删除文档                   |
| GET    | localhost:9200/索引名称/类型名称/文档Id         | 查询文档(通过指定的文档ID) |
| POST   | localhost:9200/索引名称/类型名称/_search        | 查询所有文档               |